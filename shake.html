<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Happy Counter</title>
   </head>
   <body>
      <div id="welcome-page" data-role="page">
         <header data-role="header">
            <h1>Happy Counter</h1>
         </header>
         <div id="content" data-role="content" align="center">
            <img src="img/logo.png" width="80px">
            <br/>
            <!--
            <p>
               Where I parked my car lets you bookmark where you parked your car on a map
               and then find a route when you want to return to it. The app will also
               save a log of your saved positions (up to 50).
            </p>
            -->
            <div class="odometer">32525</div>
            <br/>
            <img src="img/shakeit.png" width="300px">

            <a href="map.html?requestType=set" id="set-car-position" data-role="button">Set position</a>

         </div>

         <style type="text/css">
             .nav-glyphish-example .ui-btn .ui-btn-inner { padding-top: 40px !important; }
             .nav-glyphish-example .ui-btn .ui-icon { width: 30px!important; height: 30px!important; margin-left: -15px !important; box-shadow: none!important; -moz-box-shadow: none!important; -webkit-box-shadow: none!important; -webkit-border-radius: none !important; border-radius: none !important; }
             #profile .ui-icon { background:  url(glyphish-icons/111-user.png) 50% 50% no-repeat; background-size: 24px 22px; }
             #heart .ui-icon { background:  url(glyphish-icons/129-heart.png) 50% 50% no-repeat; background-size: 24px 16px;  }
             #map .ui-icon { background:  url(glyphish-icons/103-map.png) 50% 50% no-repeat;  background-size: 12px 26px; }
             #marker .ui-icon { background:  url(glyphish-icons/07-map-marker.png) 50% 50% no-repeat;  background-size: 22px 27px; }
             #help .ui-icon { background:  url(glyphish-icons/96-book.png) 50% 50% no-repeat;  background-size: 20px 24px; }
             #skull .ui-icon { background:  url(glyphish-icons/21-skull.png) 50% 50% no-repeat;  background-size: 22px 24px; }
         </style>
          
         <div data-role="footer" class="nav-glyphish-example">
             <div data-role="navbar" class="nav-glyphish-example" data-grid="d">
             <ul>
                 <li><a href="#" id="profile" data-icon="custom">Perfil</a></li>
                 <li><a href="leaflet.html" id="heart" data-icon="custom">Shake</a></li>
                 <li><a href="heatmap.html" id="map" data-icon="custom">Mapa</a></li>
                 <li><a href="hacksanfermin.html" id="help" data-icon="custom">Ayuda</a></li>                 
             </ul>
             </div>
         </div>

         <!--
         <footer data-role="footer">
            <h3>Un proyecto de #hacksanfermin</h3>
            <a href="aurelio.html" data-icon="info" data-iconpos="notext" class="ui-btn-right">Credits</a>            
         </footer>
         -->

      </div>
      <script>

        // Audio player
        //
        var my_media = null;
        var mediaTimer = null;
        function playAudio(src) {
            if (my_media == null) {
                // Create Media object from src
                my_media = new Media(src, onSuccess, onError);
            } // else play current audio
            // Play audio
            my_media.play();

            // Update my_media position every second
            if (mediaTimer == null) {
                mediaTimer = setInterval(function() {
                    // get my_media position
                    my_media.getCurrentPosition(
                        // success callback
                        function(position) {
                            if (position > -1) {
                                setAudioPosition((position) + " sec");
                            }
                        },
                        // error callback
                        function(e) {
                            console.log("Error getting pos=" + e);
                            setAudioPosition("Error: " + e);
                        }
                    );
                }, 1000);
            }
        }

         setTimeout(function(){
            $('.odometer').html(423234);
         }, 1000);

        var onShake = function () {
          // Code fired when a shake is detected
          //playaudio('/assets/shake.mp3');
          vibrate();
          window.location.href = "leaflet.html";
        };

        // Start watching for shake gestures and call "onShake"
        shake.startWatch(onShake);

        // Stop watching for shake gestures
        //shake.stopWatch();

      </script>
   </body>
</html>